<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>PIAACMCdesign: PIAACMC design codes</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">PIAACMCdesign
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('PIAACMC_designcodes.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">PIAACMC design codes </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1>DESIGN PARAMETERS, AND HOW/WHERE TO SET THEM</h1>
<h2>Variables driving PIAACMC optics design, excluding focal plane mask</h2>
<h3>Non-optional parameters</h3>
<p>Parameters with "*" appear in directory name.</p>
<table class="doxtable">
<tr>
<th>Variable Name </th><th>Description </th><th>Setting location  </th></tr>
<tr>
<td>pupil </td><td>pupil geometry </td><td>File ./pup_1024.fits (name defined in script sim1024) </td></tr>
<tr>
<td>(2) coin * </td><td>remapping input central obstruction </td><td>argument #2 of ./runopt script -&gt; passed to sim1024 -&gt; PIAACMC_centobs0 in ./runPIAACMC </td></tr>
<tr>
<td>(3) coout * </td><td>output central obstruction </td><td>argument #3 of ./runopt script -&gt; passed to sim1024 -&gt; PIAACMC_centobs1 in ./runPIAACMC </td></tr>
<tr>
<td>(4) fpmrad * </td><td>PIAACMC design nominal focal plane mask radius </td><td>argument #4 of ./runopt script -&gt; passed to sim1024 -&gt; PIAACMC_fpmradld in ./runPIAACMC </td></tr>
<tr>
<td>(5) lambda * </td><td>design wavelength [nm] </td><td>argument #5 of ./runopt script -&gt; passed to sim1024 -&gt; PIAACMC_lambda in ./runPIAACMC </td></tr>
<tr>
<td>(6) PIAAmaterial * </td><td>material for PIAA optics (Mirror, CaF2, etc...) </td><td>argument #6 of ./runopt script -&gt; passed to sim1024 -&gt; File &lt;confdir&gt;/conf_PIAAmaterial_name.txt </td></tr>
<tr>
<td>(7) LStransm * </td><td>Lyot stops geometric transmission </td><td>argument #7 of ./runopt script -&gt; passed to sim1024 -&gt; PIAACMC_LStransm0, PIAACMC_LStransm1, PIAACMC_LStransm2 in ./runPIAACMC </td></tr>
<tr>
<td>(8) NBlyotstop * </td><td>Number of Lyot Stops </td><td>argument #8 of ./runopt script -&gt; passed to sim1024 -&gt; PIAACMC_nblstop in ./runPIAACMC </td></tr>
</table>
<h3>Optional parameters</h3>
<p>The index number in the directory name is typically used to keep track of these parameters.</p>
<table class="doxtable">
<tr>
<th>Variable Name </th><th>Description </th><th>Setting location  </th></tr>
<tr>
<td>size </td><td>array size [pix] </td><td>File ./conf_size.txt (optional, default = 1024), read by ./runopt script </td></tr>
<tr>
<td>MdesignStepMax </td><td>Maximum design step (monochromatic) </td><td>File ./conf_MdesignStepMax.txt (optional, default = 13, max = 18), read by ./runopt script </td></tr>
<tr>
<td>beamrad </td><td>Beam physical radius [m] </td><td>File ./conf_PIAAbeamrad.txt (optional, default = 0.01), read by ./runPIAACMC script, PIAACMC_beamrad </td></tr>
<tr>
<td>Fratio </td><td>Focal ratio at focal plane </td><td>File ./conf_Fratio.txt (optional, default = 80), read by ./runPIAACMC, PIAACMC_Fratio </td></tr>
<tr>
<td>r0lim </td><td>outer radius of first PIAA optic </td><td>File ./conf_PIAAr0lim.txt (optional, default = 1.15), read by ./runPIAACMC, PIAACMC_r0lim </td></tr>
<tr>
<td>r1lim </td><td>outer radius of second PIAA optic </td><td>File ./conf_PIAAr1lim.txt (optional, default = 1.50), read by ./runPIAACMC, PIAACMC_r1lim </td></tr>
<tr>
<td>piaasep </td><td>separation between PIAA elements [m] </td><td>File ./conf_PIAAsep.txt (optional, default = 1.00), read by ./runPIAACMC, PIAACMC_piaasep </td></tr>
<tr>
<td>piaa0pos </td><td>conjugation of first PIAA element [m] </td><td>File ./conf_PIAA0pos.txt (optional, default = 1.00), read by ./runPIAACMC, PIAACMC_piaa0pos </td></tr>
</table>
<h2>Variables driving focal plane mask design</h2>
<table class="doxtable">
<tr>
<th>Variable Name </th><th>Description </th><th>Setting location  </th></tr>
<tr>
<td>(9) mlambda * </td><td>mask central wavelength [nm] </td><td>argument #9 of ./runopt script -&gt; passed to sim1024 -&gt; PIAACMC_lambda in ./runPIAACMC </td></tr>
<tr>
<td>(10) mlambdaB * </td><td>mask spectral bandwidth [%] </td><td>argument #10 of ./runopt script -&gt; passed to sim1024 -&gt; PIAACMC_lambdaB in ./runPIAACMC </td></tr>
<tr>
<td>(11) NBrings * </td><td>Number of focal plane mask rings </td><td>argument #11 of ./runopt script -&gt; passed to sim1024 -&gt; PIAACMC_NBrings in ./runPIAACMC </td></tr>
<tr>
<td>(12) maskradld * </td><td>outer radius of focal plane mask rings </td><td>argument #12 of ./runopt script -&gt; passed to sim1024 -&gt; PIAACMC_MASKRADLD in ./runPIAACMC </td></tr>
<tr>
<td>(13) PIAACMC_resolved *</td><td>source size (10x (-log(source rad)), 00 if pt </td><td>argument #13 of ./runopt script -&gt; passed to sim1024 -&gt; PIAACMC_resolved in ./runPIAACMC </td></tr>
<tr>
<td>(14) PIAACMC_extmode * </td><td>how to simulate extended source (0:3pts, 1:6pts) </td><td>argument #14 of ./runopt script -&gt; passed to sim1024 -&gt; PIAACMC_extmode in ./runPIAACMC </td></tr>
<tr>
<td>(15) fpmmaterial * </td><td>material for focal plane mask </td><td>argument #15 of ./runopt script -&gt; passed to sim1024 -&gt; File &lt;confdir&gt;/conf_fpmmaterial_name.txt </td></tr>
</table>
<h1>FILES AND DIRECTORIES SYNTAX</h1>
<p>PIAACMC designs are described by multipe parameters. Some are contained in the directory name in which the design is stored (mostly related to mirror design), and some are specific to focal plane masks and thus containted in the name of focal plane mask, as detailed below.</p>
<h2>DIRECTORIES</h2>
<h3>MONOCHROMATIC SEED, CIRCULAR SYMMETRIC</h3>
<p>All designs start from a monochromatic "seed" design, which is an idealized monochromatic PIAACMC design, with PIAA optics modeled as infinitely thin flat OPD screens.</p>
<pre class="fragment">piaacmcconf_&lt;x&gt;_coin&lt;x.xx&gt;_coout&lt;x.xx&gt;_fpmr&lt;x.xx&gt;

x    : focal plane scoring region (set to 1) 
coin : input central obstruction
coout: output central obstruction
fpmr : design focal plane mask radius
</pre><h3>OPTIMIZED DESIGN, MONO- AND POLY-CHROMATIC</h3>
<pre class="fragment">piaacmcconf_&lt;x&gt;_coin&lt;x.xxx&gt;_coout&lt;x.xxx&gt;_fpmr&lt;x.xxx&gt;_l&lt;xxxx&gt;_&lt;mmmmmm&gt;_lt&lt;t.tt&gt;_ls&lt;N&gt;_i&lt;xxx&gt;

x    : focal plane scoring region (set to 1) 
coin : input central obstruction
coout: output central obstruction
fpmr : design focal plane mask radius
l    : central wavelength [nm]
mmmmm: material used for PIAA optics (corresponding code is PIAAmaterial in OPTPIAACMCDESIGN, code written as conf_PIAAmaterial.txt in directory)
lt   : Lyot stops geometric transmission [%]
ls   : Number of Lyot Stops
i    : design index (used to number designs beyond parameters above)
</pre><h2>FOCAL PLANE MASK DESIGNS</h2>
<h3>Design solution</h3>
<pre class="fragment">fpm_zonez_s&lt;s&gt;_l&lt;xxxx&gt;_sr&lt;bb&gt;_nbr&lt;zzz&gt;_mr&lt;rrr&gt;_ssr&lt;ss&gt;_ssm&lt;m&gt;_wb&lt;ll&gt;.fits


s    : PIAACMC_FPMsectors (usually 1)
xxxx : central mask wavelength [nm]
bb   : spectral bandwidth [%]
zzz  : number of rings
rrr  : 100*PIAACMC_MASKRADLD
ss   : computePSF_ResolvedTarget: stellar radius used for optimization  [10x log l/D]
    radius = 10^{-0.1*ss}
    example: ss = 15  -&gt;  radius = 0.0316 l/D
m    : computePSF_ResolvedTarget_mode
    0: 3 points
    1: 6 points
ll   : number of wavelength bins


sprintf(fname, "!%s/fpm_zonez_s%d_l%04ld_sr%02ld_nbr%03ld_mr%03ld_ssr%02d_ssm%d_%s_wb%02d.fits", piaacmcconfdir, PIAACMC_FPMsectors, (long) (1.0e9*piaacmc[0].lambda + 0.1), (long) (1.0*piaacmc[0].lambdaB + 0.1), piaacmc[0].NBrings, (long) (100.0*PIAACMC_MASKRADLD+0.1), computePSF_ResolvedTarget, computePSF_ResolvedTarget_mode, piaacmc[0].fpmmaterial_name, piaacmc[0].nblambda);</pre><h3>Linear response between focal plane mask zones sags and final focal plane complex amplitude</h3>
<pre class="fragment">FPMresp&lt;m&gt;_s&lt;s&gt;_l&lt;xxxx&gt;_sr&lt;bb&gt;_nbr&lt;zzz&gt;_mr&lt;rrr&gt;_ssr&lt;ss&gt;_ssm&lt;m&gt;_wb&lt;ll&gt;.fits

m    : Scoring mask type
s    : PIAACMC_FPMsectors (usually 1)
xxxx : central mask wavelength [nm]
bb   : spectral bandwidth [%]
zzz  : number of rings
rrr  : 100*PIAACMC_MASKRADLD
ss   : computePSF_ResolvedTarget: stellar radius used for optimization  [10x log l/D]
    radius = 10^{-0.1*ss}
    example: ss = 15  -&gt;  radius = 0.0316 l/D
m    : computePSF_ResolvedTarget_mode
    0: 3 points
    1: 6 points
ll   : number of wavelength bins


sprintf(fname, "!%s/FPMresp%d_s%d_l%04ld_sr%02ld_nbr%03ld_mr%03ld_ssr%02d_ssm%d_%s_wb%02d.fits", piaacmcconfdir, SCORINGMASKTYPE, PIAACMC_FPMsectors, (long) (1.0e9*piaacmc[0].lambda + 0.1), (long) (1.0*piaacmc[0].lambdaB + 0.1), piaacmc[0].NBrings, (long) (100.0*PIAACMC_MASKRADLD+0.1), computePSF_ResolvedTarget, computePSF_ResolvedTarget_mode, piaacmc[0].fpmmaterial_name, piaacmc[0].nblambda);</pre><h3>Evaluation files</h3>
<pre class="fragment">Point source PSF:
psfi0_ptsr_sm&lt;m&gt;_s&lt;s&gt;_l&lt;xxxx&gt;_sr&lt;bb&gt;_nbr&lt;zzz&gt;_mr&lt;rrr&gt;_ssr&lt;ss&gt;_ssm&lt;m&gt;_wb&lt;ll&gt;.fits

Extended source PSF (4 points):
psfi0_extsrc&lt;exss&gt;_sm&lt;m&gt;_s&lt;s&gt;_l&lt;xxxx&gt;_sr&lt;bb&gt;_nbr&lt;zzz&gt;_mr&lt;rrr&gt;_ssr&lt;ss&gt;_ssm&lt;m&gt;_wb&lt;ll&gt;.fits

Flux: 
flux_sm&lt;m&gt;_s&lt;s&gt;_l&lt;xxxx&gt;_sr&lt;bb&gt;_nbr&lt;zzz&gt;_mr&lt;rrr&gt;_ssr&lt;ss&gt;_ssm&lt;m&gt;_wb&lt;ll&gt;.txt

Contrast estimate vale (point source):
contrast_sm&lt;m&gt;_s&lt;s&gt;_l&lt;xxxx&gt;_sr&lt;bb&gt;_nbr&lt;zzz&gt;_mr&lt;rrr&gt;_ssr&lt;ss&gt;_ssm&lt;m&gt;_wb&lt;ll&gt;.txt

Extended source contrast:
ContrastVal_extsrc&lt;exss&gt;_sm&lt;m&gt;_s&lt;s&gt;_l&lt;xxxx&gt;_sr&lt;bb&gt;_nbr&lt;zzz&gt;_mr&lt;rrr&gt;_ssr&lt;ss&gt;_ssm&lt;m&gt;_&lt;material&gt;_wb&lt;ll&gt;.fits
(2nd number is contrast estimate)

Extended source contrast curve:
ContrastCurve_extsrc&lt;exss&gt;_sm&lt;m&gt;_s&lt;s&gt;_l&lt;xxxx&gt;_sr&lt;bb&gt;_nbr&lt;zzz&gt;_mr&lt;rrr&gt;_ssr&lt;ss&gt;_ssm&lt;m&gt;_&lt;material&gt;_wb&lt;ll&gt;.fits


exss : stellar radius used for evaluation  [10x log l/D]
m    : Scoring mask type
s    : PIAACMC_FPMsectors (usually 1)
xxxx : central mask wavelength [nm]
bb   : spectral bandwidth [%]
zzz  : number of rings
rrr  : 100*PIAACMC_MASKRADLD
ss   : computePSF_ResolvedTarget: stellar radius used for optimization  [10x log l/D]
    radius = 10^{-0.1*ss}
    example: ss = 15  -&gt;  radius = 0.0316 l/D
m    : computePSF_ResolvedTarget_mode
    0: 3 points
    1: 6 points
material: focal plane mask material
ll   : number of wavelength bins


sprintf(fname, "!%s/psfi0_sm%d_s%d_l%04ld_sr%02ld_nbr%03ld_mr%03ld_ssr%02d_ssm%d_%s_wb%02d.fits", piaacmcconfdir, SCORINGMASKTYPE, PIAACMC_FPMsectors, (long) (1.0e9*piaacmc[0].lambda + 0.1), (long) (1.0*piaacmc[0].lambdaB + 0.1), piaacmc[0].NBrings, (long) (100.0*PIAACMC_MASKRADLD+0.1), computePSF_ResolvedTarget, computePSF_ResolvedTarget_mode, piaacmc[0].fpmmaterial_name, piaacmc[0].nblambda);
</pre><h1>OPERATION CODES</h1>
<pre class="fragment">====== CODE INDICES FOR sim1024/runPIAACMC SCRIPTS =====================================================

The indices are used to instruct which computation step(s) shall be performed
Unless described otherwise, columns in this table are:
- ###     code index/step
- [##]   corresponding index in C function PIAACMCsimul_exec
- ....   Description
- [...]  approximate execution time






--------- 0-99  Monochromatic, point source steps ---------------------------------------------------

Code runs from step 0 to requested step, skipping steps that have already been completed
Note: entering step=4 will complete steps 0, 1, 2 and 3, and STOP at step 4

  0     [  0]   3.43696e-07 PREPARE - Compute on-axis PSF, monochromatic, idealized PIAACMC, first iteration  [   8mn]
        function PIAAsimul_initpiaacmcconf
        {
            create/load Cmodes_1024.fits &amp; Fmodes_1024.fits (used to fit PIAA shapes)

            CREATE GENERALIZED PROLATE
            Uses DFT iterations
            -&gt; APLCapo.0.800.0.300.info  (masksizeld 0.0 prolatethroughput peak)
            -&gt; &lt;confdir&gt;/piaaref/APLCmaskCtransm.txt : complex amplitude mask transmission (0.51005532508) = (1.0-peak)/peak
            -&gt; &lt;confdir&gt;/piaaref/apo2Drad.fits : 2D apodization (also copied on &lt;confdir&gt;/apo2Drad.fits)
            Assumes circular aperture with circular central obstruction
                    
            FIT 2D RADIAL APODIZATION AS SUM OF 10 COSINES      
            -&gt; &lt;confdir&gt;/APOmodesCos.fits : modes used for fitting (2D maps)        
            COMPUTE 2D SAG MAPS
            Uses the cosine fit above to make 1D radial profile of PIAA shapes
            -&gt; &lt;confdir&gt;/PIAA_Mshape.txt (r0 z0 r1 z1)
            Make 2D sag maps
            -&gt; &lt;confdir&gt;/piaam0z.fits, &lt;confdir&gt;/piaam1z.fits

            FIT 2D PIAA SHAPES AS SUM OF COSINES
            -&gt; &lt;confdir&gt;/piaa0Cz.fits, &lt;confdir&gt;/piaa1Cz.fits (fitted shapes)
            -&gt; &lt;confdir&gt;/piaa0Cres.fits, &lt;confdir&gt;/piaa1Cres.fits (residuals)
            FIT 2D RESIDUAL AS SUM OF FOURIER MODES

            NOMINAL PIAA SHAPES, FITTED TO COSINES AND FOURIER MODES
            -&gt; &lt;confdir&gt;/piaaref/piaa0Cmodes.fits
            -&gt; &lt;confdir&gt;/piaaref/piaa1Cmodes.fits
            -&gt; &lt;confdir&gt;/piaaref/piaa0Fmodes.fits
            -&gt; &lt;confdir&gt;/piaaref/piaa1Fmodes.fits
            + copy to &lt;confdir&gt;/
        
            CREATE FOCAL PLANE MASK
            -&gt; &lt;confdir&gt;/fpm_zonea00_00_001_001.fits    
            -&gt; &lt;confdir&gt;/fpm_zonez00_00_001_001.fits    

            MAKE LYOT STOPS
            -&gt; &lt;confdir&gt;/LyotStop0.fits, &lt;confdir&gt;/LyotStop1.fits ...
        }
        
        MAKE PIAA SHAPES FROM COEFFICIENTS (function PIAACMCsimul_makePIAAshapes())
        -&gt; &lt;confdir&gt;/piaa0Cz.fits
        -&gt; &lt;confdir&gt;/piaa0Fz.fits
        -&gt; &lt;confdir&gt;/piaa0z.fits (sum of both terms above)
        -&gt; &lt;confdir&gt;/piaa1Cz.fits
        -&gt; &lt;confdir&gt;/piaa1Fz.fits
        -&gt; &lt;confdir&gt;/piaa1z.fits (sum of both terms above)

        COMPUTE PSF
           -&gt; psfi0_step000.fits

  1     [  0]   3.43696e-07
        -&gt; psfi0_step001.fits

  2     [   ]   5.12665e-05 Load pupil geometry                                                     [   0mn]
        -&gt; pupa0_1024.fits

  3     [  0]   5.12665e-05 actual pupil Compute on-axis PSF                                        [   0nm]
        -&gt; psfi0_step003.fits

  4     [  5]   3.46488e-06 Compute Lyot stops shapes and locations, 1st pass                       [   1mn]
        throughput = LStransm2 (user-specied argument to script)
        -&gt; conjugations.txt

  5     [  2]   3.34238e-08 optimize focal plane mask transm, 1st pass -&gt; result_fpmt.log           [   2mn]
        optimal value is written in file &lt;confdir&gt;/piaacmcparams.conf
        -&gt; result_fpmt.log (ampl contrast iter range stepsize)
        

  6     [  5]   2.06295e-08 Compute Lyot stops shapes and locations, 2nd pass, 60% throughput       [   1mn]
        throughput &gt; LStransm = LStransm0 = 0.60

  7     [ 40]    3.36149e-09    tune PIAA shapes and focal plane mask transm # modes: 10, 5             [  35mn]
        -&gt; linoptval_step007.txt

  8     [ 40]   3.3526e-09  tune PIAA shapes and focal plane mask transm # modes: 20, 20            [  23mn]
        -&gt; linoptval_step008.txt 
        updates piaa shapes (piaa0Cmodes, piaa0Fmodes, piaa1Cmodes, piaa1Fmodes)
        updates focal plane mask transm (&lt;confdir&gt;/piaacmcparams.conf)

  9     [  5]   4.3982e-09      Compute Lyot stops shapes and locations, 2nd pass, intermediate throughput [   1mn]
        throughput = LStransm1

 10     [  1]   3.62923e-09 tune Lyot stops conjugations                                        [   8mn]
        throughput &gt; LStransm1 
        -&gt; result_LMpos.log

 11     [ 40]   1.2318e-09  tune PIAA shapes and focal plane mask transm # modes: 20, 20            [  71mn]
        -&gt; linoptval_step011.txt 

 12     [ 40]   2.9522e-10  tune PIAA shapes and focal plane mask transm, # modes: 40, 150          [ 287mn]

 13     [  5]   3.14043e-08 Compute Lyot stops shapes and locations, 3rd pass, goal throughput      [   1mn]
        throughput &gt; LStransm2 
        
 14     [  1]   1.41547e-08 Tune Lyot stops conjugations                                            [   9mn]
        
 15     [ 40]   5.25497e-09 tune PIAA shapes and focal plane mask transm # modes: 20, 20            [  37mn]
 16     [ 40]    tune PIAA shapes and focal plane mask transm, # modes: 40, 150             [ 169mn]
 17     [ 40]   tune PIAA shapes and focal plane mask transm, # modes: 40, 625              [ 591mn]




--------- 100-199  Polychromatic, extended source, physical focal plane mask (consecutive) ------------------------

100 [ 11]   turn focal plane mask into zones, Compute polychromatic response to zones, store result in FPMresp
        -&gt; FPMresp&lt;SRE&gt;_&lt;xx&gt;_&lt;yyy&gt;_&lt;ll&gt;.fits
            S:   SCORINGMASKTYPE
            R:   computePSF_ResolvedTarget
            E:   PIAACMC_FPMsectors
            xx: (long) (10.0*PIAACMC_MASKRADLD+0.1)  NOTE: this is the outer edge of the outer ring
            yyy: piaacmc[0].NBrings
            ll:  piaacmc[0].nblambda

101 [ 13]   linear piece-wise optimization - chromaticity
        &lt;- Reads input mask from &lt;confdir&gt;/conf_MASKRADLD.txt &lt;confdir&gt;/conf_FPMsectors.txt, &lt;confdir&gt;/conf_NBrings.txt, &lt;confdir&gt;/conf_resolved.txt
        -&gt; linoptval.txt
            local derivatives used to indentify steepest descent direction, then scan along this direction
            lines starting by "##" show values along line of steepest descent
            Best value then chosen, and new direction computed
        -&gt; &lt;confdir&gt;/fpm_zonez&lt;RE&gt;_&lt;rr&gt;_&lt;yyy&gt;_&lt;zzz&gt;.fits,  &lt;confdir&gt;/fpm_zonea&lt;RE&gt;_&lt;rr&gt;_&lt;yyy&gt;_&lt;zzz&gt;.fits
            R:   computePSF_ResolvedTarget
            E:   PIAACMC_FPMsectors
            rr:  (long) (10.0*PIAACMC_MASKRADLD+0.1)    (=00 for idealized PIAACMC) 
            yyy: piaacmc[0].NBrings
            zzz: piaacmc[0].focmNBzone          
        -&gt; mode13_&lt;RE&gt;_&lt;yyy&gt;_&lt;zzz&gt;_&lt;ll&gt;.txt
            R:   computePSF_ResolvedTarget
            E:   PIAACMC_FPMsectors         
            yyy: piaacmc[0].NBrings
            zzz: piaacmc[0].focmNBzone
        columns:
            1: iteration
            2: amplitude of random offset introduced at starting point (MODampl)
            3: starting point contrast (PIAACMCSIMUL_VALREF)
            4: current contrast value (PIAACMCSIMUL_VAL)
            5: best contrast value (bestval)
            6: zero starting poing flag (zeroST): 1 if starting from zero
        -&gt; mode13_&lt;RE&gt;_&lt;yyy&gt;_&lt;zzz&gt;_&lt;ll&gt;.bestval.txt
            best contrast value
    will run until file &lt;confdir&gt;/stoploop13.txt detected   





----------- 200-299  Optimization (polychromatic) single steps ---------------------------------------

210 [40]    full co-optimization of PIAA shapes and focal plane mask zones
        # modes: 10, 5





--------- 500 - 599 : housekeeping -------------------------------------------------------------------

500 [N/A]   store as reference for use at other lambda / spectral band






------------ 700-799 EVALUATIONS ---------------------------------------------------------------------

A single step will be executed.

MONOCHROMATIC, PERFECT SINGLE ZONE MASK

700     [  0]   Evaluate point source mask constrat, on point source, idealized mask                   [ 12sec]
            -&gt; psfi0_step700.fits
        -&gt; psfi0_%d%d_%02ld_%03ld_%03ld.fits
piaacmcconfdir, computePSF_ResolvedTarget, PIAACMC_FPMsectors, (long) (10.0*PIAACMC_MASKRADLD+0.1), piaacmc[0].NBrings, piaacmc[0].focmNBzone                                               

701     [100]   Evaluate sensitivity to pointing errors, idealized mask                                [ 25sec]
            -&gt; psfi0_step701.fits
        -&gt; &lt;confdir&gt;/ContrastCurve%d_%03ld_%03ld_%02d_ps%03ld.txt"
PIAACMC_FPMsectors, piaacmc[0].NBrings, piaacmc[0].focmNBzone, piaacmc[0].nblambda, (long) (1000.0*ldoffset));
    

702     [   ]   Compute on-axis monochromatic PSF - extended source, using extended source focal plane mask



720 [  0]   Compute on-axis polychromatic PSF, 10 spectral values
        -&gt; psfi0.fits, psfp0.fits, psfa0.fits       
        -&gt; WFamp and WFpha FITS files
        -&gt; fpm_pha.fits, fpm_amp.fits : 1 - focal plane mask complex amplitude
        -&gt; lambdalist.txt
        -&gt; psfi0_%d%d_%02ld_%03ld_%03ld.fits
piaacmcconfdir, computePSF_ResolvedTarget, PIAACMC_FPMsectors, (long) (10.0*PIAACMC_MASKRADLD+0.1), piaacmc[0].NBrings, piaacmc[0].focmNBzone

721 [100]   Evaluate sensitivity to pointing errors, polychromatic PSF
        -&gt; psfi0.fits, psfp0.fits, psfa0.fits       
        -&gt; WFamp and WFpha FITS files
        -&gt; fpm_pha.fits, fpm_amp.fits : 1 - focal plane mask complex amplitude
        -&gt; lambdalist.txt
        -&gt; &lt;confdir&gt;/ContrastVall%d%d_%02ld_%03ld_%02d_tt%03ld.txt
computePSF_ResolvedTarget, PIAACMC_FPMsectors, (long) (10.0*PIAACMC_MASKRADLD+0.1), piaacmc[0].NBrings, piaacmc[0].nblambda, (long) (1000.0*ldoffset)
            col 1: valref = average flux over scoring region  
            col 2: aveC = averge contrast from 2 to 6 l/D
            col 3: mask rad l/D
            col 4: input Central Obs
            col 5: output Central Obs
            col 6: lambda [nm]
            col 7: bandwidth [%]
            col 8: sectors ?
            col 9: NB rings
            col 10: NB zones
            col 11: NB lambda
            col 12: source size offset
        -&gt; &lt;confdir&gt;/ContrastCurve%d_%03ld_%03ld_%02d.txt"
PIAACMC_FPMsectors, piaacmc[0].NBrings, piaacmc[0].focmNBzone, piaacmc[0].nblambda);

750 [101]   Transmission curve



------------ MISC OPERATIONS -------------------------------------------------------------------------


800     [200]   Make focal plane mask OPD map -&gt; FITS file
        -&gt; &lt;confdir&gt;/fpmOPD&lt;RE&gt;_&lt;yyy&gt;_&lt;zzz&gt;.fits"
            R:   computePSF_ResolvedTarget
            E:   PIAACMC_FPMsectors
            yyy: piaacmc[0].NBrings
            zzz: piaacmc[0].focmNBzone



======================================================================================================</pre> </div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="md_src_PIAACMCsimul_README.html">PIAACMC design</a></li>
    <li class="footer">Generated on Wed Jul 8 2015 22:03:28 for PIAACMCdesign by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.8 </li>
  </ul>
</div>
</body>
</html>
