<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>PIAACMCdesign: Command Line Interface (CLI)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">PIAACMCdesign
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('md_src_CLIcore.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Command Line Interface (CLI) </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Files <a class="el" href="CLIcore_8c.html">CLIcore.c</a> and <a class="el" href="CLIcore_8h.html">CLIcore.h</a> contain the source code for the command line interpreter (CLI)</p>
<h3>COMMAND LINE OPTIONS</h3>
<pre class="fragment">  -h, --help 
    print this message and exit
  -i, --info
    Print version, settings, info and exit
  -j, --journal
    keeps journal of commands - TO BE IMPLEMENTED 
    Write all commands to file "cfits_cmdlog.txt" as they are entered
  --verbose
    be verbose
  -d, --debug=DEBUGLEVEL
    Set debug level at startup
  -o, --overwrite 
    Automatically overwrite files if necessary (USE WITH CAUTION - WILL OVERWRITE EXISTING FITS FILES)
  -l
    Keeps a list of images in file imlist.txt
  -m, --mmon=TTYDEVICE
    open memory monitor on tty device
    example:
    &lt;executable&gt; -m /dev/tty2
    &lt;executable&gt; --mmon=/dev/tty2
  -n, --pname=&lt;myprocessname&gt;
    rename process to &lt;processname&gt;
  -p, --priority=&lt;PR&gt;
    change process priority (0-99)
    higher number: higher priority
    example:
    &lt;executable&gt; -p 90
  -f, --fifo==FIFONAME
        specify fifo name
        example
        &lt;executable&gt; -f /tmp/fifo24
        &lt;executable&gt; --fifo=/tmp/fifo24
  -s, --startup=STARTUPFILE
        execute specified script on startup
        requires the -f option, as the script is loaded into fifo
</pre><h2>SYNTAX RULES, PARSER</h2>
<ul>
<li>Spaces are used to separate arguments. Number of spaces irrelevant.</li>
<li>Comments are written after the special character #</li>
<li>If a command is not found, the input string will be interpreted as an arithmetic operation (See ARITHMETIC OPERATIONS below)</li>
</ul>
<p>&lt;command&gt; &lt;arg1&gt; &lt;arg2&gt; # comment</p>
<h2>TAB COMPLETION</h2>
<p>Tab completion is provided and behaves as follows:</p><ul>
<li>first argument: try to match command, then image, then filename</li>
<li>additional arguments: try to match image, then filename</li>
</ul>
<h2>INPUT</h2>
<p>GNU readline used to read input. See GNU readline documentation on <a href="http://tiswww.case.edu/php/chet/readline/rltop.html">http://tiswww.case.edu/php/chet/readline/rltop.html</a>. For a quick help on readline input, type: </p><pre class="fragment">&gt; helprl 
</pre><p>The command line interpreter (CLI) will take input from file cmdfile.txt if it exists. If file cmdfile.txt exists commands will be read one by one from top to bottom, and will be removed from the file as they are read, until the file is empty</p>
<h2>HELP COMMANDS</h2>
<pre class="fragment">&gt; ?
&gt; help               
    # print this help file
&gt; helprl             
    # print readline quick help
&gt; lm?                        
    # list all modules loaded
&gt; m? &lt;module&gt;               
    # list all commands for a module
&gt; m?                    
    # perform m? on all modules loaded
&gt; cmd? &lt;command&gt;              
    # command description for &lt;command&gt;
&gt; cmd?                    
    # command description for all commands
&gt; h? str                    
    # search for string &lt;str&gt; in all commands and their descriptions
</pre><h2>IMPORTANT COMMANDS</h2>
<pre class="fragment">&gt; ci
    # compilation time and memory usage
&gt; listim 
    # list all images in memory
&gt; listimf &lt;filename&gt; 
    # list all images in memory and write output to file &lt;filename&gt;
&gt; !&lt;syscommand&gt;             
    # execute system command
&gt; showhist                  
    # prints history of all commands
&gt; quit                      
    # exit Cfits (exit also works)

&gt; setdp &lt;val&gt;            
    # set default precision to float (&lt;val&gt; = 0) or double (&lt;val&gt; = 1)
&gt; creaim &lt;im&gt; &lt;xs&gt; &lt;ys&gt;     
    # creates a 2D image named &lt;im&gt;, size = &lt;xs&gt; x &lt;ys&gt; pixels
</pre><h2>FITS FILES I/O (see also modules COREMOD_memory and COREMOD_iofits</h2>
<p>FITSIO is used for FITS files I/O, see FITSIO documentation for more detailed instructions<br />
 </p><h3>LOADING FILES</h3>
<pre class="fragment">&gt; loadfits &lt;fname&gt; &lt;imname&gt; 
    # load FITS file &lt;fname&gt; into image &lt;imname&gt;
&gt; loadfits im1.fits imf1    
    # load file im1.fits in memory with name imf1
&gt; loadfits im1.fits      
    # load file im1.fits in memory with name im1 (default name is composed of all chars before first ".")
&gt; loadfits im1.fits.gz im1  
    # load compressed file
</pre><h3>SAVING FILES</h3>
<pre class="fragment">&gt; save_fl  &lt;imname&gt; &lt;fname&gt; 
    # save image &lt;imname&gt; into FITS file &lt;fname&gt; (float)
&gt; save_fl im1 imf1.fits      
    # write image im1 to disk file imf1.fits
&gt; save_fl im1
    # write image im1 to disk file im1.fits (default file name = image name + ".fits")
&gt; save_fl im1 "!im1.fits"   
    # overwrite file im1.fits if it exists
&gt; save_fl im1 "../dir2/im1.fits"
    # specify full path
&gt; save_fl im1 im1.fits.gz   
    # save compressed image
</pre><h2>INTEGRATION WITH STANDARD LINUX TOOLS AND COMMANDS</h2>
<p>USING "cmdfile.txt" TO DRIVE CFITS FROM UNIX PROMPT:</p>
<p>Cfits can use standard linux tools and commands thanks to the cmdfile.txt file, which, if it exists, is executed as Cfits commands. For example, to load all im*.fits files in memory, you can type within Cfits:</p>
<blockquote class="doxtable">
<p>!ls im*.fits | xargs -I {} echo loadfits {} &gt; cmdfile.txt </p>
</blockquote>
<p>You can also drive Cfits from the unix command line if you are not in Cfits, but Cfits is running in the same directory. For example, the following command will load all im*.fits in Cfits from the unix command line:</p>
<p>bash$ ls im*.fits | xargs -I {} echo loadfits {} &gt; cmdfile.txt</p>
<p>USING "imlist.txt" AND "cmdfile.txt"</p>
<p>If you start Cfits with the "-l" option, the file "imlist.txt" contains the list of images currently in memory in a ASCII table. You can use standard unix tools to process this list and issue commands. For example, if you want to save all images with x size &gt; 200 onto disk as single precision FITS files :</p>
<blockquote class="doxtable">
<p>!awk '{if ($4&gt;200) print $2}' imlist.txt| xargs -I {} echo save_fl {} {}_tmp.fits &gt; cmdfile.txt </p>
</blockquote>
<h2>ARITHMETIC OPERATIONS</h2>
<pre class="fragment">&gt; im1=sqrt(im+2.0)          
    # will perform an arithmetic operation on image im and store the result in image im1
</pre> </div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Thu Sep 10 2015 17:27:46 for PIAACMCdesign by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.8 </li>
  </ul>
</div>
</body>
</html>
